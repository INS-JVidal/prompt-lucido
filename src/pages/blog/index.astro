---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog', ({ data }) => !data.draft))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Blog — Prompt Lúcido">
	<section class="blog-list container--narrow">
		<h1 class="blog-list__title">Blog</h1>
		<div class="blog-list__grid">
			{posts.map((post) => (
				<PostCard
					title={post.data.title}
					description={post.data.description}
					pubDate={post.data.pubDate}
					slug={post.id}
					category={post.data.category}
					readingTime={post.data.readingTime}
					lang={post.data.lang}
				/>
			))}
		</div>
	</section>
</BaseLayout>

<style>
	.blog-list {
		padding: 3rem 0 4rem;
	}

	.blog-list__title {
		font-family: var(--font-heading);
		font-size: 2.25rem;
		font-weight: 700;
		letter-spacing: -0.02em;
		margin-bottom: 2rem;
	}

	.blog-list__grid {
		display: flex;
		flex-direction: column;
		gap: 1.25rem;
	}
</style>
