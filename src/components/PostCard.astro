---
interface Props {
	title: string;
	description: string;
	pubDate: Date;
	href: string;
	series?: string;
	readingTime?: number;
	lang?: string;
}

const {
	title,
	description,
	pubDate,
	href,
	series,
	readingTime,
	lang = 'es',
} = Astro.props;

const formattedDate = pubDate.toLocaleDateString(lang, {
	year: 'numeric',
	month: 'long',
	day: 'numeric',
});
---

<article class="post-entry" data-series={series ?? ''}>
	<a href={href} class="post-entry__link">
		{series && <span class="post-entry__series">{series}</span>}
		<h3 class="post-entry__title">{title}</h3>
		<p class="post-entry__desc">{description}</p>
		<p class="post-entry__meta">
			<time datetime={pubDate.toISOString()}>{formattedDate}</time>
			{readingTime && <span>&middot; {readingTime} min</span>}
		</p>
	</a>
</article>

<style>
	.post-entry {
		border-bottom: 1px solid var(--border);
		transition: transform 0.15s;
	}

	.post-entry:last-child {
		border-bottom: none;
	}

	.post-entry:hover {
		transform: translateX(4px);
	}

	.post-entry__link {
		display: block;
		padding: 1.5rem 0;
		text-decoration: none;
		color: inherit;
	}

	.post-entry__series {
		display: inline-block;
		font-family: var(--font-ui);
		font-size: 0.7rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.04em;
		color: var(--accent);
		background: var(--accent-light);
		border: 1px solid var(--accent);
		border-radius: 4px;
		padding: 0.15rem 0.5rem;
		margin-bottom: 0.5rem;
	}

	.post-entry__title {
		font-family: var(--font-body);
		font-size: 1.65rem;
		font-weight: 700;
		line-height: 1.3;
		letter-spacing: -0.01em;
		color: var(--text);
		transition: color 0.15s;
	}

	.post-entry:hover .post-entry__title {
		color: var(--accent);
	}

	.post-entry__desc {
		font-family: var(--font-body);
		font-size: 1.1rem;
		line-height: 1.55;
		color: var(--text-secondary);
		margin-top: 0.5rem;
	}

	.post-entry__meta {
		font-family: var(--font-ui);
		font-size: 0.825rem;
		color: var(--text-muted);
		margin-top: 0.75rem;
		display: flex;
		gap: 0.4rem;
	}

	@media (max-width: 768px) {
		.post-entry__link {
			padding: 1.25rem 0;
		}

		.post-entry__title {
			font-size: 1.35rem;
		}

		.post-entry__desc {
			font-size: 1rem;
		}
	}
</style>
